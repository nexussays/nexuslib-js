<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Core.js Unit Tests</title>
<style type="text/css">
#output
{
	font-family: Consolas;
}
#output div
{
	margin: .5em 0;
}
#output .results
{
	font-size: small;
	color: #666;
}
div.error
{
	background-color: #f9a;
}
</style>
<!--
<script type="text/javascript" src="http://getfirebug.com/releases/lite/1.2/firebug-lite-compressed.js"></script>-->
<script src="../core.js" type="text/javascript"></script>
<script type="text/javascript">
window.load.setup = function()
{
    //var testinghtml = get.id("#testing_show");
	//var temp = get.id("#testing");
	//testinghtml.innerHTML = getOuterHTML(temp, true).replace(/\t/g,"    ");    
}
window.load.tests = function()
{
	var test = [
        ["body", 1],
        ["html", 1],
        ["#testing", 1],
        ["*#testing", 1],
        ["div#testing", 1],
        ["span#testing", 0],
        ["div#testing.hidden", 1],
        ["div#testing.someclass", 0],
        ["html  body #radioid", 1],
        ["ol #radioid", 0],
        ["span.purple", 2],
        ["span.purple.indigo", 1],
        [".class3", 1],
        ["*.class3", 1],
        ["li:empty", 1],
        ["input[type=\"radio\"]", 3],
        ["input[type=\"radio]", 0],
        ["input[disabled]", 2],
        ["input[type=\"radio\"][name=\"rad\"]", 2],
        ["input[name=\"rad\"]", 3],
        ["*[name=\"rad\"]", 3],
        ["a[href^=\"http://www.w3.org\"]", 1],
        ["div[title=\"Employee Pay\"]", 1],
        ["div[title=\"it'safield\"]", 1],
        ["div[title=\"Manager's Pay\"]", 1],
        ["div[title$='Pay']", 3],
        ["div.bottomline[title=Total]", 1],
        ["#testing div[title]", 5],
        ["span[class=\"class2\"]", 1],
        ["match\nnothing", 0],
        [null, 0],
        ["#testing ul li", 7],
        ["ul li > input", 2],
        ["#testing span.purple.blue", 1],
        ["a[href$='.pdf']", 1],
        ["#testing > span", 1],
        ["div textarea:first-child", 1],
        ["textarea:last-child", 2],
        ["ul li:nth-child(odd)", 4],
    ];

	var output = get.id("#output");
	output.innerHTML = "";

	test = test.map(function(x) { return [x[0], get(x[0], ""), x[1]]; });

	for(var x = 0; x < test.length; ++x)
	{
		var item = test[x];
		var resultSize = 0;
		var resultObjects = [];
		if(item[1])
		{
			item[1] = item[1].map(function(x) { return x.nodeName.toLowerCase() + (x.id ? "#" + x.id : "") + (x.className ? "." + (x.className.split(" ").join(".")) : ""); });
			resultObjects = item[1];
			resultSize = resultObjects.length;
		}
		var ok = (resultSize == item[2]);
		output.innerHTML += "<div" + (ok ? "" : " class=\"error\"") + "><strong>" + item[0] +
            (ok ? "" : " (" + resultSize + " result" + (resultSize > 1 ? "s " : " ") + "!= " + item[2] + " expected)")
            + "</strong><br /><span class=\"results\">" + resultObjects.join(", ") + "</span></div>";
	}
}
</script>
</head>
<body>
<div id="testing" class="hidden" style="display: none">
    <div>
        <textarea rows="3" cols="3">Lorem Ipsum</textarea>
        <ol>
            <li>one</li>
        </ol>
        <textarea rows="5" cols="5">dolor sit amet</textarea>
    </div>
    <div>&nbsp;</div>
    <ul>
        <li class="class 3 class'3">li</li>
        <li>li</li>
        <li>
            <span class="indigo purple blue">colored text</span>
        </li>
        <li>
            <span><input type="radio" disabled="disabled" /></span>
            <input type="radio" name="rad" id="radioid" />
            <input type="radio" name="rad" />
            <textarea rows="3" cols="3">second</textarea>
            <input type="text" name="rad" />
            <input type="text" disabled="disabled" />
        </li>
        <li></li>
        <li>another</li>
        <li class="class3">li</li>
    </ul>
    <p>
        <span class="class2 another">
            <span class="  purple">text</span>
        </span>
    </p>
    <a href="/download/from/url/file.exe">file</a>
    <a href="/download/from/url/file.pdf">file</a>
    <a href="/download/from/url/file.zip">file</a>
    <a href="/download/from/url/otherfile.zip">file</a>
    <div title="it'safield">$12/hr</div>
    <div title="Employee Pay">$12/hr</div>
    <div title="Manager's Pay">$36/hr</div>
    <div title="Owner's Pay">
        <span class="class2">$34,567/hr</span>
    </div>
    <div class="bottomline" title="Total">$99,453/hr</div>
    <span><a href="http://www.w3.org/">Go to W3</a><a href="http://www.w3borg/">Go to W3</a></span>
</div>
<div id="output"></div>
</body>
</html>